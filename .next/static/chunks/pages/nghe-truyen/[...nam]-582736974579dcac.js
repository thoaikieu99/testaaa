(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[174],{8756:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/nghe-truyen/[...nam]",function(){return a(6332)}])},2846:function(e,t,a){"use strict";var i=a(5893),s=a(8636),n=a.n(s);t.Z=()=>(0,i.jsx)("div",{className:n().backgt,children:(0,i.jsx)("div",{className:"all",children:(0,i.jsx)("span",{className:n().loader})})})},6332:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return x}});var i=a(5893),s=a(7294),n=a(7630),l=a(1163),r=a(8528);a(2944);var o=a(1964),c=a.n(o);a(3982);var u=a(3353),d=a(8888),p=a(5756),h=a(5397),v=a(2846);let m=a(6807);var g=e=>{var t;let{audio:a}=e,[l,o]=(0,s.useState)(""),[g,x]=(0,s.useState)(!1),[f,y]=(0,p.fP)();(0,s.useEffect)(()=>{let e=new m;e.importKey("-----BEGIN RSA PRIVATE KEY-----MIIBOQIBAAJBAJR0XQoVGAA82ryNnUrEg7zrKm2qkWKPRPWCLXV1XXKTp96iqzGuXZFPnXemuvchmCPW5LSmQLXL5rA2DxOfGE8CAwEAAQJAWerNO8EhA2vYlSI1Zkb3ACN0VG5eltLuUsHhZOaMjkuhJniZRTJ/mRTrep5uSAilh9XIiNO5EpDTD08IzOrUMQIhANuwkriblKRHYPqrfJ2mzc0cPBQeobcLwNY+QTYPpjl5AiEArP225ij7YBLYr46U+LYy7k9ef+2+g2TON/vy5jyUNgcCIAvv3zkKsxvuCPX15XKHgr03YIhTVcQlblf10ANI/GY5AiBXBlehV5KF1VVOk9Lbf4UFn8XxY1+I6AhZ35RlQKpqtwIgJkbNqu0ZwYizS1BzXaHUAF5Mfln5jyAQHPBVXJ1WoAE=-----END RSA PRIVATE KEY-----","pkcs1-pem"),o(e.decrypt(a.link_audio,"utf8").slice(1,-1).split("<br>"))},[a]);let[j,T]=(0,s.useState)(!1),{isLogin:k,userName:N}=(0,h.Q)(),A=async()=>{let e=await (0,n.sc)(f.too,a.id);"not Find one TT"==e.message&&T(!1),"success"==e.status&&T(!0)};(0,s.useEffect)(()=>{k&&A()},[k]);let[E,S]=(0,s.useState)(!1),[w,b]=(0,s.useState)(!0),[C,_]=(0,s.useState)(0),[I,P]=(0,s.useState)(),[R,X]=(0,s.useState)(!1),[V,L]=(0,s.useState)(),[O,Y]=(0,s.useState)(),[B,M]=(0,s.useState)(),[Q,Z]=(0,s.useState)(),[K,J]=(0,s.useState)(!1),[F,z]=(0,s.useState)(1),[D,H]=(0,s.useState)(!1),[U,q]=(0,s.useState)(0),G=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e="startime-"+a.id,t="startspeed-"+a.id,i="track-"+a.id;if(Z(f["linkk-"+a.id]),Y(f[i]),L(f[e]),M(f[t]),f[e]){var s;let t,a,i;H(!0),P((t=Math.floor((s=f[e])/3600),a=Math.floor((s%=3600)/60),i=s%60,"".concat(t<10?"0"+t:t,":").concat(a<10?"0"+a:a,":").concat(i<10?"0"+i:i)))}else H(!1)},[a]),(0,s.useEffect)(()=>{G.current.audio.current.playbackRate=F},[G,F]);let W=async()=>{await (0,n.Wc)(a.id)};(0,s.useEffect)(()=>{let e=setTimeout(()=>{W()},200);return()=>clearTimeout(e)},[a.id]),(0,s.useEffect)(()=>{document.getElementsByClassName("audio active")[0].scrollIntoView(!1)},[U]);let $=(e,t)=>{if(E){let i="startime-"+a.id,s="startspeed-"+a.id,n="track-"+a.id,l="linkk-"+a.id,r=parseInt(e);r&&F&&""!==U&&t&&(y(i,r,{maxAge:604800}),y(s,F,{maxAge:604800}),y(n,U,{maxAge:604800}),y(l,t,{maxAge:604800}))}},ee=e=>{q(parseInt(e.target.id))},et=""!==l?l.map((e,t)=>(0,i.jsxs)("div",{id:t,className:"audio ".concat(U===t?"active":""),onClick:ee,children:["Tập ",t+1]},"audio-"+t)):(0,i.jsxs)("div",{id:0,className:"audio active",onClick:ee,children:["Tập ",1]},"audio-1"),ea=()=>{if(J(!0),-1==Q.search("audiotruyenfull.vip")?en():el(),q(O),O===U){var e,t;(null==G?void 0:null===(t=G.current)||void 0===t?void 0:null===(e=t.audio)||void 0===e?void 0:e.current).currentTime=parseInt(V)}z(B)},ei=()=>{var e,t;let a=null==G?void 0:null===(t=G.current)||void 0===t?void 0:null===(e=t.audio)||void 0===e?void 0:e.current;a.currentTime=a.currentTime+.1,null==a||a.play()},es=(0,i.jsx)(r.Z,{header:(0,i.jsx)("h5",{className:"sss",style:{textAlign:"center"},children:a.title}),src:l[U],onPlay:()=>{S(!0),console.log("aplay")},onPause:()=>{S(!1),console.log("apau")},onPlayError:ei,onError:ei,showSkipControls:!0,customAdditionalControls:[],customVolumeControls:[],onLoadedData:()=>{var e,t;let a=null==G?void 0:null===(t=G.current)||void 0===t?void 0:null===(e=t.audio)||void 0===e?void 0:e.current;a&&(a.playbackRate=F,K&&(J(!1),a.currentTime=parseInt(V),null==a||a.play()))},progressJumpSteps:{backward:1e4,forward:1e4},showDownloadProgress:!0,onClickNext:()=>{q(e=>e<l.length-1?e+1:0)},onClickPrevious:()=>{q(e=>e>1?e-1:0)},onEnded:()=>{q(e=>e<l.length-1?e+1:0)},footer:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("input",{type:"range",min:"0.1",max:"5",step:.1,value:F,onChange:e=>z(e.target.value),style:{width:"calc(100% - 36px)"}}),(0,i.jsxs)("span",{children:[" ",F,"x"]})]}),ref:G,onListen:e=>$(e.target.currentTime,e.target.currentSrc)}),en=()=>{l.forEach((e,t,a)=>{a[t]=a[t].replace("audiotruyenfull.vip/audio","archive.org/download")}),o(l),b(!0)},el=()=>{l.forEach((e,t,a)=>{var i=""+(t+1),s="000".substring(0,3-i.length)+i;let n=a[t],l=n.search(".mp3"),r=n.lastIndexOf("/",l-1),o=n.lastIndexOf("/",r-2),c=n.substring(o+1,r);a[t]="https://audiotruyenfull.vip/audio/"+c+"/"+s+"-"+c+".mp3"}),o(l),b(!1)};function er(){clearTimeout(t)}(0,s.useEffect)(()=>(t=setInterval(()=>{if(C<1){var e,t;return(null==G?void 0:null===(t=G.current)||void 0===t?void 0:null===(e=t.audio)||void 0===e?void 0:e.current).pause(),er(),1}console.log(C),_(e=>e-1)},1e3),()=>er()),[C]);let eo=async()=>{x(!0);let e="startime-"+a.id,t="startspeed-"+a.id,i="track-"+a.id,s={recaudio:f["linkk-"+a.id],rectile:f[i],startspeed:f[t],startime:f[e],audio_id:a.id},l=await (0,n.OH)(s,f.too);"fail"==l.status&&("No TT found with that slug"==l.message?alert("Them vao tu truyen truoc"):alert(l.message)),"success"==l.status&&alert("success"),x(!1)},ec=async()=>{x(!0);let e=await (0,n.mu)(a.id,f.too);if("success"==e.status){let a=e.data.TuTruyen.recaudio;if(a){var t;let i,s,n;Z(e.data.TuTruyen.recaudio),Y(+e.data.TuTruyen.rectile),L(+e.data.TuTruyen.startime),M(e.data.TuTruyen.startspeed),H(!0),P((i=Math.floor((t=+e.data.TuTruyen.startime)/3600),s=Math.floor((t%=3600)/60),n=t%60,"".concat(i<10?"0"+i:i,":").concat(s<10?"0"+s:s,":").concat(n<10?"0"+n:n))),B==e.data.TuTruyen.startspeed&&Q==a&&ea()}x(!1)}},eu=async()=>{let e={audio_id:a.id};x(!0),"error"==(await (0,n.hM)(e,f.too)).status?alert("Da them vao tu truyen"):(alert("Thanh Cong"),A()),x(!1)},ed=j?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{style:{paddingRight:"20px",display:"inline",position:"absolute",right:"90px "},onClick:eo,children:"save"}),(0,i.jsx)("span",{style:{paddingRight:"20px",display:"inline",position:"absolute",right:"140px "},onClick:ec,children:"Load"})]}):(0,i.jsx)("span",{style:{paddingRight:"20px",display:"inline",position:"absolute",right:"90px "},onClick:eu,children:"them"});return(0,i.jsxs)("div",{className:"d-flex res justify-content-center align-items-center ",children:[g&&(0,i.jsx)(v.Z,{}),(0,i.jsx)("div",{className:"AudioPlay col-12 col-sm-7 col-md-6 rounded-3 shadow-lg bg-body ",children:(0,i.jsxs)("div",{className:"list",children:[es,(0,i.jsx)("div",{className:"ngheTiep",style:D?{display:"block"}:{display:"none"},children:(0,i.jsxs)("span",{className:"tii",onClick:ea,children:["Nghe Tiếp ",I]})}),(0,i.jsxs)("div",{style:{position:"relative",paddingBottom:"10px"},children:[(0,i.jsx)("span",{className:"tii ".concat(w?"acc":null),style:{padding:"0 20px 0 20px"},onClick:en,children:"Sv1"}),(0,i.jsx)("span",{className:"tii ".concat(w?null:"acc"),style:{padding:"0 20px 0 20px"},Loading:!0,onClick:el,children:"Sv-Vip"}),(0,i.jsxs)("select",{className:"form-select ".concat(R?"abcd":null),style:{width:"100px",padding:"0 1rem 0 0.45rem",display:"inline",position:"absolute",right:"0"},onChange:e=>{0!=e.target.value&&(_(60*e.target.value),X(!0))},defaultValue:"0",children:[(0,i.jsx)("option",{value:"0",children:"Hẹn giờ"}),(0,i.jsx)("option",{value:"10",children:"10 ph\xfat"}),(0,i.jsx)("option",{value:"20",children:"20 ph\xfat"}),(0,i.jsx)("option",{value:"30",children:"30 ph\xfat"}),(0,i.jsx)("option",{value:"40",children:"40 ph\xfat"}),(0,i.jsx)("option",{value:"60",children:"60 ph\xfat"}),(0,i.jsx)("option",{value:"90",children:"90 ph\xfat"}),(0,i.jsx)("option",{value:"120",children:"120 ph\xfat"}),(0,i.jsx)("option",{value:"180",children:"180 ph\xfat"})]}),(0,i.jsx)("span",{className:"".concat(R?null:"abcd"),style:{paddingRight:"20px",display:"inline",position:"absolute",right:"0"},onClick:()=>{er(),X(!1)},children:(e=>{let t="0".concat(e%60).slice(-2),a="0".concat("".concat(Math.floor(e/60))%60).slice(-2),i="0".concat(Math.floor(e/3600)).slice(-2);return"".concat(i," : ").concat(a," : ").concat(t)})(C)}),ed]}),(0,i.jsx)(c(),{children:(0,i.jsx)(u.Z,{children:(0,i.jsx)(d.Z,{className:"justify-content-md-center",children:(0,i.jsx)("div",{className:"lisAudio",children:et})})})})]})})]})},x=()=>{let{nam:e}=(0,l.useRouter)().query,[t,a]=(0,s.useState)(),[r,o]=(0,s.useState)(!0),c=async()=>{if(e){var t;a(null===(t=(await (0,n.Fe)(e)).data)||void 0===t?void 0:t.audio),o(!1)}};return((0,s.useEffect)(()=>{o(!0),c()},[e]),r)?(0,i.jsx)(v.Z,{}):(0,i.jsx)(i.Fragment,{children:t?(0,i.jsx)(g,{audio:t}):""})}},8636:function(e){e.exports={loader:"loading_loader__yrSJs",rotation:"loading_rotation__05gn6",backgt:"loading_backgt__v7lQM"}}},function(e){e.O(0,[714,566,888,774,179],function(){return e(e.s=8756)}),_N_E=e.O()}]);